import fs from 'fs';
import path from 'path';
import sharp from 'sharp';

const svg = `
<svg
    xmlns="http://www.w3.org/2000/svg"
    viewBox="0 0 1008 1024"
    fill="none"
>
    <mask id="z-cutout">
        <rect width="100%" height="100%" fill="white" />
        <!-- The stylized Z paths as cutout (black) -->
        <g fill="black">
            <path d="M 492.00 210.00 C 492.04 210.00 492.00 211.00 492.00 211.00 C 512.47 211.00 532.40 210.00 553.00 210.00 C 556.40 209.67 560.92 209.00 565.00 209.00 C 585.06 209.00 605.43 209.16 625.00 210.00 C 640.38 209.17 658.42 207.88 673.00 211.00 C 685.63 211.48 698.15 216.12 708.75 222.25 C 719.34 228.39 726.45 235.11 734.30 244.70 C 742.15 254.29 747.13 264.11 750.93 276.07 C 754.73 288.03 756.20 305.78 753.02 318.02 C 749.85 330.27 746.65 342.44 739.25 352.25 C 731.85 362.05 725.69 370.06 718.25 379.25 C 710.80 388.43 704.32 396.92 696.75 405.75 C 689.17 414.57 682.06 423.05 675.08 432.08 C 668.10 441.12 660.53 449.70 653.70 458.70 C 646.87 467.69 639.37 475.43 632.25 484.25 C 625.13 493.06 618.31 502.31 611.08 511.08 C 603.86 519.85 597.19 528.93 589.25 537.25 C 581.30 545.56 575.74 555.61 568.08 564.08 C 560.42 572.56 553.94 581.86 546.23 590.23 C 538.52 598.60 533.29 608.75 524.25 616.25 C 515.21 623.74 514.90 640.15 501.32 638.68 C 487.74 637.21 471.11 639.25 456.93 638.93 C 442.74 638.61 426.18 639.58 412.00 638.00 C 418.38 623.27 432.92 613.98 441.92 600.92 C 450.92 587.86 462.20 575.85 472.75 563.75 C 483.30 551.66 491.66 538.56 502.75 526.75 C 513.85 514.94 521.81 500.71 532.77 488.77 C 543.73 476.83 552.40 464.14 562.92 451.92 C 573.44 439.69 583.09 426.76 593.30 414.30 C 603.52 401.84 613.52 390.19 623.30 377.30 C 633.08 364.41 645.38 353.88 653.75 339.75 C 662.13 325.63 682.96 318.39 679.00 298.00 C 675.04 277.61 641.80 284.66 626.00 285.00 C 615.65 285.82 607.36 285.21 597.00 285.00 C 577.68 284.61 558.81 285.00 540.00 285.00 C 540.44 285.14 541.79 286.40 542.00 287.00 C 532.83 286.34 522.34 288.33 514.00 286.00 C 509.00 286.00 504.00 286.00 499.00 286.00 C 491.33 286.00 483.67 286.00 476.00 286.00 C 475.50 286.00 475.00 286.00 475.00 286.00 C 470.46 289.36 461.74 285.92 456.00 287.00 C 450.26 288.08 442.08 286.49 437.00 286.00 C 428.67 286.00 420.33 286.00 412.00 286.00 C 410.67 286.00 409.33 286.00 408.00 286.00 C 388.72 288.63 367.71 286.00 348.00 286.00 C 344.00 286.00 340.00 286.00 336.00 286.00 C 320.25 287.52 300.23 289.78 285.00 286.00 C 283.36 285.86 283.12 285.45 282.00 285.00 C 259.63 276.13 243.06 256.74 255.31 231.31 C 267.55 205.87 298.23 210.00 323.00 210.00 C 331.64 209.16 341.66 209.00 351.00 209.00 C 401.33 209.00 451.67 209.00 502.00 209.00 C 499.57 211.13 495.18 209.47 492.00 210.00" />
            <path d="M 554.00 334.00 C 563.67 334.00 573.33 334.00 583.00 334.00 C 581.70 333.84 578.15 332.84 577.00 332.00 C 582.51 333.06 594.38 329.71 596.00 334.00 C 595.02 340.37 584.92 345.03 582.25 351.25 C 579.57 357.46 572.17 362.33 568.25 368.25 C 564.32 374.16 558.99 380.65 554.25 386.25 C 549.51 391.85 544.71 397.20 539.75 402.75 C 534.79 408.30 530.41 414.98 525.75 420.75 C 521.08 426.51 516.48 432.04 511.75 437.75 C 507.02 443.46 502.30 448.88 497.75 454.75 C 493.21 460.62 488.00 466.48 483.25 472.25 C 478.50 478.01 474.70 484.10 469.75 489.75 C 464.79 495.39 460.02 501.49 455.25 507.25 C 450.47 513.00 445.88 518.40 441.25 524.25 C 436.61 530.09 431.45 535.93 426.75 541.75 C 422.05 547.57 418.05 553.46 413.08 559.08 C 408.11 564.70 403.71 570.27 399.08 576.08 C 394.45 581.90 389.23 587.82 384.75 593.75 C 380.26 599.67 375.43 604.86 370.75 610.75 C 366.07 616.64 360.83 622.17 356.25 628.25 C 351.67 634.33 347.51 639.30 342.25 645.25 C 336.98 651.20 333.21 655.80 329.08 663.08 C 324.94 670.36 327.66 680.37 336.08 683.92 C 344.49 687.47 352.31 689.58 362.00 689.00 C 371.69 688.42 382.08 685.99 392.00 687.00 C 401.92 688.01 411.68 687.81 422.00 688.00 C 432.32 688.19 442.83 687.08 453.00 687.00 C 463.17 686.92 472.64 688.52 483.00 688.00 C 493.36 687.48 502.91 688.71 513.01 687.01 C 523.11 685.31 533.88 689.17 544.00 688.00 C 554.12 686.83 564.98 689.73 575.00 688.00 C 585.02 686.28 594.94 687.62 605.00 688.00 C 615.06 688.38 625.96 688.51 636.00 688.00 C 646.04 687.49 656.59 686.30 667.00 687.00 C 652.64 669.79 633.52 655.25 636.93 630.93 C 640.33 606.60 673.34 594.06 692.69 606.31 C 712.05 618.55 720.89 634.86 738.25 649.75 C 755.60 664.64 764.17 678.44 782.25 693.75 C 800.32 709.06 797.85 738.51 780.75 753.75 C 763.66 768.99 752.89 783.16 736.25 798.25 C 719.60 813.34 711.42 829.61 691.77 841.77 C 672.12 853.93 643.40 844.63 637.67 819.33 C 631.94 794.02 653.74 779.13 668.00 762.00 C 666.67 762.00 665.33 762.00 664.00 762.00 C 633.37 759.97 600.56 764.87 569.00 763.00 C 537.44 761.13 503.83 764.98 473.00 762.00 C 469.33 762.00 465.67 762.00 462.00 762.00 C 438.51 764.27 411.44 763.38 388.00 762.00 C 371.64 762.62 352.66 762.96 336.93 761.07 C 321.19 759.19 307.06 755.29 294.30 746.70 C 281.55 738.10 274.49 730.52 266.08 717.92 C 257.67 705.32 253.77 689.44 253.00 674.00 C 252.23 658.56 257.59 641.23 264.31 628.31 C 271.02 615.38 278.54 605.42 287.75 594.75 C 296.96 584.08 305.58 574.85 314.25 564.25 C 322.92 553.64 330.14 543.44 339.25 533.25 C 348.36 523.05 355.82 512.07 364.75 501.75 C 373.68 491.44 381.98 481.03 390.25 470.25 C 398.53 459.47 408.06 450.25 416.25 439.25 C 424.43 428.24 433.46 419.10 441.75 407.75 C 450.04 396.41 458.86 388.41 467.25 376.25 C 475.65 364.10 484.20 358.53 492.25 344.25 C 500.31 329.98 520.32 334.56 535.00 334.00 C 541.89 332.21 547.22 332.62 554.00 334.00" />
        </g>
    </mask>

    <!-- The Rounded Square in Brand Color -->
    <path
        mask="url(#z-cutout)"
        fill="#4f46e5"
        d="M 377.00 21.00 C 399.33 21.00 421.67 21.00 444.00 21.00 C 450.35 20.39 457.96 20.00 465.00 20.00 C 492.00 20.00 519.00 20.00 546.00 20.00 C 552.71 20.00 560.05 20.42 566.00 21.00 C 589.00 21.00 612.00 21.00 635.00 21.00 C 681.83 21.00 729.28 18.47 776.00 21.00 C 805.60 22.61 840.32 26.80 865.23 41.77 C 890.14 56.74 909.45 67.07 928.30 89.70 C 947.16 112.32 959.08 130.97 969.31 159.69 C 979.54 188.42 983.56 223.25 982.00 257.00 C 980.44 290.75 983.88 330.93 982.00 366.00 C 980.12 401.07 983.80 439.52 982.00 475.00 C 980.20 510.47 983.32 547.65 982.00 583.00 C 980.68 618.35 982.30 657.29 982.00 692.00 C 981.70 726.71 980.94 767.22 981.01 800.01 C 981.07 832.79 973.30 862.19 960.08 889.08 C 946.85 915.96 934.05 931.88 911.92 951.92 C 889.79 971.95 871.43 983.68 842.32 993.32 C 813.22 1002.97 778.93 1007.18 745.00 1006.00 C 711.07 1004.82 670.52 1004.88 635.00 1005.00 C 599.48 1005.12 559.84 1004.89 524.00 1005.00 C 488.16 1005.11 449.50 1004.82 414.00 1005.00 C 378.50 1005.18 337.29 1004.64 303.00 1005.00 C 268.71 1005.36 227.82 1007.79 197.00 1002.00 C 166.18 996.21 143.24 986.40 120.25 968.75 C 97.26 951.09 78.40 939.23 64.25 913.75 C 50.09 888.28 37.28 865.21 32.00 835.00 C 26.73 804.79 27.00 761.35 27.00 729.00 C 27.00 720.32 27.23 710.91 28.00 703.00 C 28.00 678.67 28.00 654.33 28.00 630.00 C 28.00 623.00 28.00 616.00 28.00 609.00 C 28.00 543.94 28.00 479.56 28.00 415.00 C 28.00 409.41 27.51 403.57 28.00 398.00 C 28.31 394.42 29.00 390.88 29.00 387.00 C 28.42 380.98 28.00 373.71 28.00 367.00 C 28.00 363.00 28.00 359.00 28.00 355.00 C 28.00 322.25 25.80 280.18 27.00 248.00 C 28.20 215.82 31.85 182.82 43.32 155.32 C 54.79 127.82 65.09 109.21 84.75 87.75 C 104.41 66.29 122.06 54.84 147.23 41.23 C 172.40 27.61 206.69 22.59 236.00 21.00 C 282.68 18.47 330.24 21.00 377.00 21.00 Z"
    />
</svg>
`;

const ICON_DIR = path.resolve('public/icons');
if (!fs.existsSync(ICON_DIR)) {
    fs.mkdirSync(ICON_DIR, { recursive: true });
}

async function generateIcons() {
    try {
        await sharp(Buffer.from(svg))
            .resize(192, 192)
            .png()
            .toFile(path.join(ICON_DIR, '192x192.png'));
        console.log('Generated 192x192.png');

        await sharp(Buffer.from(svg))
            .resize(512, 512)
            .png()
            .toFile(path.join(ICON_DIR, '512x512.png'));
        console.log('Generated 512x512.png');
    } catch (e) {
        console.error('Error:', e);
    }
}

generateIcons();
